#!/bin/bash

# --- Configuration ---
# Parent directory where different scrcpy version folders are located.
SCRCPY_PARENT_DIR="/home/steven/bin"

# Name of the directory containing the specific scrcpy version you want to use.
# !!! IMPORTANT: Update this line when you install a new version of scrcpy !!!
# For example, if your new scrcpy version is in "/home/steven/bin/scrcpy-linux-x86_64-v3.2",
# then set SCRCPY_VERSION_FOLDER_NAME="scrcpy-linux-x86_64-v3.2"
SCRCPY_VERSION_FOLDER_NAME="scrcpy-linux-x86_64-v3.1" # <-- UPDATE THIS

DEVICE_IP="192.168.1.35"
# --- End Configuration ---

# Construct the full path to the scrcpy executable
SCRCPY_PATH="$SCRCPY_PARENT_DIR/$SCRCPY_VERSION_FOLDER_NAME/scrcpy"

# Check if scrcpy exists at the specified path
if [ ! -f "$SCRCPY_PATH" ]; then
  echo "Error: scrcpy not found at $SCRCPY_PATH"
  echo "Please ensure SCRCPY_PARENT_DIR and SCRCPY_VERSION_FOLDER_NAME are set correctly in the script."
  exit 1
fi

echo "Using scrcpy: $SCRCPY_PATH"

# Start scrcpy with the specified options
"$SCRCPY_PATH" --tcpip="$DEVICE_IP" --video-codec=h265 --turn-screen-off --stay-awake --no-audio